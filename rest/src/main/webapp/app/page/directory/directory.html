<!-- Controlled by DirectoryCtrl (in directoryController.js)  -->

<div class="row">

  <!-- Content -->
  <div class="col-md-12 col-xs-12">

    <!-- Refsets -->
    <div class="col-md-12 col-xs-12">
      <h4 class="section-header">
        Refsets
        <div style="float: right;">
          <a title="Create new refset" ng-click="openNewRefsetModal(lrefset)">
            <i class="glyphicon glyphicon-plus"></i>
          </a>
        </div>
      </h4>
      <table class="table">
        <thead>
          <th class="col-md-2 col-xs-2">Id</th>
          <th class="col-md-4 col-xs-4">Name</th>
          <th class="col-md-2 col-xs-2">Type</th>
          <th class="col-md-1 col-xs-1">Status</th>
          <th class="col-md-3 col-xs-3">Project</th>
        </thead>
        <tbody>
          <tr ng-repeat="refset in refsets" ng-click="setProject(project)">
            <td>{{refset.id}}</td>
            <td><a ng-click="refset.isExpanded = !refset.isExpanded">
                [
                <i
                  ng-class="{'glyphicon-minus': refset.isExpanded, 'glyphicon-plus': !refset.isExpanded}"></i>
                ]
              </a>{{refset.name}}
              <div collapse="!refset.isExpanded">{{refset.description}}</div></td>
            <td><span class="hidden-xs">{{toDate(project.lastModified)}}</span>
              <span class="visible-xs" title="{{toDate(project.lastModified)}}">
                {{toShortDate(project.lastModified)}}</span></td>

            <!-- Notification cell -->
            <td class="hidden-xs" ng-show="user.applicationRole == 'ADMIN'"><span>
                <input type="checkbox" ng-model="project.adminNotification"
                  title="Enable admin notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Admin<br>
              </span> <span>
                <input type="checkbox" ng-model="project.leadNotification"
                  title="Enable lead notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Lead<br>
              </span> <span>
                <input type="checkbox"
                  ng-model="project.standardUserNotification"
                  title="Enable standard user notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Standard
              </span></td>
            <td class="visible-xs" ng-show="user.applicationRole == 'ADMIN'"><span>
                <input type="checkbox" ng-model="project.adminNotification"
                  title="Enable admin notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Adm<br>
              </span> <span>
                <input type="checkbox" ng-model="project.leadNotification"
                  title="Enable lead notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Lead<br>
              </span> <span>
                <input type="checkbox"
                  ng-model="project.standardUserNotification"
                  title="Enable standard user notification"
                  ng-click="updateProject(project); $event.stopPropagation();">Std
              </span></td>
            <td><a title="Remove"
                ng-click="remove('project',project,projects); $event.stopPropagation()">
                <i class="glyphicon glyphicon-remove"></i>
              </a></td>
          </tr>
        </tbody>
      </table>

      <!--  end Projects -->
    </div>
  </div>
</div>