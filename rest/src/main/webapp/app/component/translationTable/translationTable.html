<div class="row">

  <div class="col-md-6 col-xs-12">

    <span style="display: block;">
      <pagination items-per-page="pageSize" max-size="5" boundary-links="true"
        class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;"
        first-text="&laquo;" last-text="&raquo;"
        ng-show="translations.totalCount > pageSize || paging['translation'].filter"
        total-items="translations.totalCount"
        ng-model="paging['translation'].page" ng-change="getTranslations()"></pagination>

      <input class="input-filter" placeholder="Enter filter text"
        ng-show="translations.totalCount > pageSize || paging['translation'].filter"
        type="text" ng-model="paging['translation'].filter"
        ng-model-options="{ debounce: 300 }" ng-change="getTranslations()">

      <button class="btn btn-xs btn-warning"
        ng-show="paging['translation'].filter"
        ng-click="paging['translation'].filter = ''; getTranslations()"
        title="Click to clear filter text">Clear</button>
    </span>


    <span ng-show="translations.totalCount == 0" style="display: block;"
      class="alert alert-warning">No {{value}} translations.</span>
    <table ng-show="translations.totalCount > 0" class="table">
      <thead>
        <th class="col-md-2 col-xs-2"
          ng-click="setSortField('translation','terminologyId', null)">Refset
          Id<span ng-bind="getSortIndicator('translation','terminologyId')"></span>
        </th>
        <th class="col-md-4 col-xs-4"
          ng-click="setSortField('translation','name', null)">Name<span
            ng-bind="getSortIndicator('translation','name',null)"></span></th>
        <th class="col-md-6 col-xs-6"
          ng-click="setSortField('translation','module', null)">Module<span
            ng-bind="getSortIndicator('translation','module',null)"></span></th>
      </thead>
      <tbody>
        <tr ng-repeat="translation in translations"
          ng-click="setTranslation(translation);" class="table-select-row">
          <td style="word-break: break-word;">{{translation.terminologyId}}</td>
          <td>{{translation.name}}</td>
          <td>{{translation.moduleId}}<!-- Mobile friendly line-break --> <br
            class="visible-xs-inline" /> <img ng-show="iconConfig[translation.moduleId]" title="Flag icon"
              src="{{iconConfig[translation.moduleId]}}" /> <!-- Mobile friendly line-break -->
            <br class="visible-xs-inline" /> {{translation.organization}}
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <span ng-show="!translation && translations.length > 0" class="alert alert-warning">Select a
    translation to see details</span>

  <!-- Details, Releases, Concept-->
  <div ng-show="translation" class="col-md-6 col-xs-12">

    <div class="col-md-12 col-xs-12">

      <!-- Translation Details -->
      <h4>{{translation.name}}</h4>
      <b>Description: </b>{{translation.description}}
      <table class="table">
        <thead class="table-select-row">
          <th class="col-md-4 col-xs-4"></th>
          <th class="col-md-8 col-xs-8"></th>
        </thead>
        <tbody>
          <tr>
            <td>Refset Id</td>
            <td>{{translation.refsetId}}</td>
          </tr>
          <tr>
            <td>Module Id</td>
            <td>{{translation.moduleId}} <img ng-show="iconConfig[translation.moduleId]" title="Flag icon"
              src="{{iconConfig[translationO.moduleId]}}" /></td>
          </tr>
          <tr>
            <td>Effective Time</td>
            <td>{{toShortDate(translation.effectiveTime)}}</td>
          </tr>
          <tr>
            <td>Terminology</td>
            <td>{{translation.terminology}}</td>
          </tr>
          <tr>
            <td>Version</td>
            <td>{{translation.version}}</td>
          </tr>
          <tr ng-show="translation.releaseInfo">
            <td>RELEASED</td>
            <td>{{refset.releaseInfo.name}}
          </tr>
          <tr ng-show="!translation.releaseInfo">
            <td>Not yet released</td>
            <td>&nbsp;</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- release info -->
    <div class="col-md-12 col-xs-12">
      <span
        ng-show="translation.releaseInfo && !translation.releaseInfo.artifacts"
        class="alert alert-warning">Release has no associated artifacts</span>
      <div class="col-md-12 col-xs-12">
        <table
          ng-show="translation.releaseInfo && translation.releaseInfo.artifacts"
          class="table">
          <thead>
            <th class="col-md-6 col-xs-6">Release File</th>
            <th class="col-md-6 col-xs-6">Timestamp</th>
            <th style="width: 1%; word-wrap: nowrap"></th>
          </thead>
          <tbody>
            <tr
              ng-repeat="artifact in translation.releaseInfo.artifacts | orderBy:'artifact.name'">
              <td>{{artifact.name}}</td>
              <td>{{toShortDate(artifact.timestamp)}}</td>
              <td><span>
                  <a ng-click="exportReleaseArtifact(artifact)">
                    <i title="Export {{artifact.name}}"
                      class="material-icons md-18">file_download</i>
                  </a>
                </span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <div class="col-md-12 col-xs-12">
      <h4>Translation Concepts</h4>
      <span ng-show="!translation.concepts" class="alert alert-warning">Translation
        has no concepts</span>

      <span ng-show="translation.concepts">

        <span style="display: block;">
          <pagination items-per-page="pageSize" max-size="5"
            boundary-links="true" class="pagination-sm" previous-text="&lsaquo;"
            next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"
            ng-show="translation.concepts.totalCount > pageSize || paging['concept'].filter"
            total-items="translation.concepts.totalCount"
            ng-model="paging['concept'].page"
            ng-change="getConcepts(translation)"></pagination>

          <input class="input-filter" placeholder="Enter filter text"
            ng-show="translation.concepts.totalCount > pageSize || paging['concept'].filter"
            type="text" ng-model="paging['concept'].filter"
            ng-model-options="{ debounce: 300 }"
            ng-change="getConcepts(translation)">

          <button class="btn btn-xs btn-warning"
            ng-show="paging['concept'].filter"
            ng-click="paging['concept'].filter = ''; getConcepts(translation)"
            title="Click to clear filter text">Clear</button>
        </span>

        <table class="table">
          <thead>
            <th class="col-md-4 col-xs-4"
              ng-click="setSortField('concept','terminologyId', translation)">Concept
              Id<span ng-bind="getSortIndicator('concept','terminologyId')"></span>
            </th>
            <th class="col-md-4 col-xs-4"
              ng-click="setSortField('concept','name', translation)">Name<span
                ng-bind="getSortIndicator('concept','name')"></span>
            </th>
            <th style="width: 1%; word-wrap: nowrap"></th>
          </thead>
          <tbody>
            <tr ng-repeat="concept in translation.concepts">
              <td>{{concept.terminologyId}}</td>
              <td>{{concept.name}} <br /> <span
                  ng-repeat="desc in concept.descriptions | orderBy:'desc.term'">
                  &bull;&nbsp;{{desc.term}} </span>
              </td>
            </tr>
          </tbody>
        </table>
      </span>
    </div>
  </div>
</div>
