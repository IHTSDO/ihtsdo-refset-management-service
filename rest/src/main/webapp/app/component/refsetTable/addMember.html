<div class="modal-header">
  <h4>Add Refset Member</h4>

  <div>
    <span>
      <form ng-submit="getSearchResults(search)">
        <input ng-model="search">
        <button class="btn btn-primary"
          ng-click="getSearchResults(search); 
    ">Search</button>
      </form>
    </span>
  </div>
</div>

<div class="modal-body">

   <div class="row">
   <div class="col-md-6 col-xs-12">
    <table ng-show="searchResults" class="table">
      <thead>
        <th class="col-md-3 col-xs-3">Concept id</th>
        <th class="col-md-9 col-xs-9">Concept name</th>
      </thead>
      <tbody>
        <tr ng-repeat="concept in searchResults"
          ng-click="selectConcept(concept)"
          ng-class="{selected: concept.terminologyId === selectedConcept.terminologyId}">
          <td>{{concept.terminologyId}}</td>
          <td>{{concept.name}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="col-md-6 col-xs-12">
  <span ng-show="searchResults && !selectedConcept" class="alert alert-warning">Select a concept to
    see details</span>
    <h5 ng-show="parents.length > 0"><b>Parents</b></h5>
    <table ng-show="parents" class="table">
      <tbody>
        <tr ng-repeat="concept in parents">
          <td>{{concept.terminologyId}}</td>
          <td>{{concept.name}}</td>
        </tr>
      </tbody>
    </table>

    <h5 ng-show="concept"><b>Concept</b> {{concept.terminologyId}}</h5>
    <h5 ng-show="concept"><b>Name</b> {{concept.name}}</h5>
    <h5 ng-show="concept && concept.descriptions.length > 0"><b>Descriptions</b> </h5>
    <table ng-show="concept.descriptions.length > 0" class="table">
      <tbody>
        <tr ng-repeat="description in concept.descriptions">
          <td>{{description.terminologyId}}</td>
          <td>{{description.term}}</td>
        </tr>
      </tbody>
    </table>

    <h5 ng-show="children.length > 0"><b>Children</b></h5>
    
    <span style="display: block;">
      <pagination items-per-page="pageSize" max-size="5" boundary-links="true"
        class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;"
        first-text="&laquo;" last-text="&raquo;"
        ng-show="children.totalCount > pageSize || paging['children'].filter"
        total-items="children.totalCount" ng-model="paging['children'].page"
        ng-change="getConceptChildren(selectedConcept)"></pagination>

      <!-- TODO RootService.applyPfsToList doesn't do filtering yet -->
      <!-- <input class="input-filter" placeholder="Enter filter text"
        ng-show="children.totalCount > pageSize || paging['children'].filter"
        type="text" ng-model="paging['children'].filter"
        ng-model-options="{ debounce: 300 }" ng-change="getConceptChildren(selectedConcept)">

      <button class="btn btn-xs btn-warning" ng-show="paging['children'].filter"
        ng-click="paging['children'].filter = ''; getConceptChildren(selectedConcept)"
        title="Click to clear filter text">Clear</button> -->
    </span>
    
    
    <table ng-show="children.length > 0" class="table">
      
      <tbody>
        <tr ng-repeat="concept in children">
          <td>{{concept.terminologyId}}</td>
          <td>{{concept.name}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  </div>
</div>


<div class="modal-footer">
  <!-- Member type:<select ng-model="memberType" 
    ng-options="item for item in ['MEMBER', 'INCLUSION', 'EXCLUSION']"></select>
 -->
  <button class="btn btn-primary" ng-disabled="selectedConcept == null || selectedConcept == 'undefined'"
    ng-click="addMember(selectedConcept); 
    ">Add Member</button>
  <button class="btn btn-warning"
    title="Add selected concept as new refset member" ng-click="cancel()">Cancel</button>
</div>